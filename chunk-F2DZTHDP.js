import{b as l,c as y,d as u,e as p,g as d,h as w,i as S,k as b}from"./chunk-4AF5SF7N.js";import{Q as f,U as m,a as c,b as n,d as a}from"./chunk-4ZNG45L6.js";var E=(()=>{let o=class o{constructor(r){this.firebaseService=r}getAllUsers(){return a(this,null,function*(){try{let r=u(l(this.firebaseService.firestore,"users"));return(yield d(r)).docs.map(t=>n(c({},t.data()),{uid:t.id}))}catch(r){throw console.error("Erreur lors de la r\xE9cup\xE9ration des utilisateurs:",r),r}})}getUsersByRole(r){return a(this,null,function*(){try{let e=u(l(this.firebaseService.firestore,"users"),p("role","==",r));return(yield d(e)).docs.map(s=>n(c({},s.data()),{uid:s.id}))}catch(e){throw console.error("Erreur lors de la r\xE9cup\xE9ration des utilisateurs par r\xF4le:",e),e}})}getDoctorsBySpeciality(r){return a(this,null,function*(){try{let e=u(l(this.firebaseService.firestore,"users"),p("role","==","medecin"),p("speciality","==",r));return(yield d(e)).docs.map(s=>n(c({},s.data()),{uid:s.id}))}catch(e){throw console.error("Erreur lors de la r\xE9cup\xE9ration des m\xE9decins:",e),e}})}updateUser(r,e){return a(this,null,function*(){try{yield w(y(this.firebaseService.firestore,"users",r),e)}catch(t){throw console.error("Erreur lors de la mise \xE0 jour de l'utilisateur:",t),t}})}deleteUser(r){return a(this,null,function*(){try{yield S(y(this.firebaseService.firestore,"users",r))}catch(e){throw console.error("Erreur lors de la suppression de l'utilisateur:",e),e}})}getStatistics(){return a(this,null,function*(){try{let r=yield this.getAllUsers(),e=r.filter(i=>i.role==="medecin"),t=r.filter(i=>i.role==="patient"),s={};return e.forEach(i=>{i.speciality&&(s[i.speciality]=(s[i.speciality]||0)+1)}),{totalUsers:r.length,totalDoctors:e.length,totalPatients:t.length,specialities:s}}catch(r){throw console.error("Erreur lors de la r\xE9cup\xE9ration des statistiques:",r),r}})}};o.\u0275fac=function(e){return new(e||o)(m(b))},o.\u0275prov=f({token:o,factory:o.\u0275fac,providedIn:"root"});let h=o;return h})();export{E as a};
