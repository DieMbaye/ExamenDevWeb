import{b as s,c as l,d as m,e as p,f as h,g as y,h as w,j as v,k as D}from"./chunk-4AF5SF7N.js";import{Q as f,U as u,a as n,b as c,d as o}from"./chunk-4ZNG45L6.js";var A=(()=>{let r=class r{constructor(t){this.firebaseService=t}createNotification(t){return o(this,null,function*(){try{return(yield v(s(this.firebaseService.firestore,"notifications"),c(n({},t),{createdAt:new Date}))).id}catch(e){throw console.error("Erreur lors de la cr\xE9ation de la notification:",e),e}})}getNotificationsByUser(t){return o(this,null,function*(){try{let e=m(s(this.firebaseService.firestore,"notifications"),p("userId","==",t),h("createdAt","desc"));return(yield y(e)).docs.map(d=>c(n({},d.data()),{id:d.id}))}catch(e){throw console.error("Erreur lors de la r\xE9cup\xE9ration des notifications:",e),e}})}markAsRead(t){return o(this,null,function*(){try{yield w(l(this.firebaseService.firestore,"notifications",t),{read:!0,readAt:new Date})}catch(e){throw console.error("Erreur lors du marquage comme lu:",e),e}})}sendAppointmentNotification(t,e,i){return o(this,null,function*(){yield this.createNotification({userId:t,title:"Nouvelle demande de rendez-vous",message:`${e} souhaite prendre un rendez-vous le ${i.toLocaleDateString()}`,type:"appointment",read:!1,createdAt:new Date})})}sendConfirmationNotification(t,e,i){return o(this,null,function*(){yield this.createNotification({userId:t,title:"Rendez-vous confirm\xE9",message:`Votre rendez-vous avec Dr. ${e} le ${i.toLocaleDateString()} a \xE9t\xE9 confirm\xE9`,type:"confirmation",read:!1,createdAt:new Date})})}};r.\u0275fac=function(e){return new(e||r)(u(D))},r.\u0275prov=f({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();export{A as a};
