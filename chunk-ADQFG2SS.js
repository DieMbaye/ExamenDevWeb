import{b as c,c as p,d,e as u,f,g as h,h as y,i as S,j as v,k as b}from"./chunk-4AF5SF7N.js";import{Q as l,U as w,a as n,b as i,d as o}from"./chunk-4ZNG45L6.js";var E=(()=>{let s=class s{constructor(r){this.firebaseService=r}createAppointment(r){return o(this,null,function*(){try{return(yield v(c(this.firebaseService.firestore,"appointments"),i(n({},r),{createdAt:new Date,updatedAt:new Date}))).id}catch(e){throw console.error("Erreur lors de la cr\xE9ation de rendez-vous:",e),e}})}getAppointmentsByPatient(r){return o(this,null,function*(){try{let e=d(c(this.firebaseService.firestore,"appointments"),u("patientId","==",r),f("date","desc"));return(yield h(e)).docs.map(a=>i(n({},a.data()),{id:a.id}))}catch(e){throw console.error("Erreur lors de la r\xE9cup\xE9ration des rendez-vous:",e),e instanceof Error&&console.error("Stack trace:",e.stack),e}})}getAppointmentsByDoctor(r){return o(this,null,function*(){try{let e=d(c(this.firebaseService.firestore,"appointments"),u("doctorId","==",r),f("date","desc"));return(yield h(e)).docs.map(a=>i(n({},a.data()),{id:a.id}))}catch(e){throw console.error("Erreur lors de la r\xE9cup\xE9ration des rendez-vous:",e),e}})}updateAppointmentStatus(r,e){return o(this,null,function*(){try{yield y(p(this.firebaseService.firestore,"appointments",r),{status:e,updatedAt:new Date})}catch(t){throw console.error("Erreur lors de la mise \xE0 jour du statut:",t),t}})}deleteAppointment(r){return o(this,null,function*(){try{yield S(p(this.firebaseService.firestore,"appointments",r))}catch(e){throw console.error("Erreur lors de la suppression du rendez-vous:",e),e}})}addNotesToAppointment(r,e){return o(this,null,function*(){let t=p(this.firebaseService.firestore,`appointments/${r}`);return y(t,{notes:e})})}getPendingAppointments(){return o(this,null,function*(){try{let r=d(c(this.firebaseService.firestore,"appointments"),u("status","==","pending"),f("date","asc"));return(yield h(r)).docs.map(t=>i(n({},t.data()),{id:t.id}))}catch(r){throw console.error("Erreur lors de la r\xE9cup\xE9ration des rendez-vous en attente:",r),r}})}};s.\u0275fac=function(e){return new(e||s)(w(b))},s.\u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"});let m=s;return m})();export{E as a};
